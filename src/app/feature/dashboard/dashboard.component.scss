@use '../../../styles/variables.scss' as *;

/* Teacher dashboard styles (isolated; no impact on .dashboard-continer) */
.tdb {
    display: grid;
    gap: 1.5rem;
    margin-bottom: 1.5rem;

    .tdb-kpis {
        display: grid;
        grid-template-columns: repeat(5, minmax(120px, 1fr));
        gap: .75rem;

        .kpi {
            background: $background-color-light;
            border: 1px solid rgba(0,0,0,.08);
            border-radius: 12px;
            padding: .9rem;
            display: flex; flex-direction: column; gap: .25rem;
            .kpi-label { color: $text-color-light; font-size: .85rem; }
            .kpi-value { font-weight: 700; font-size: 1.35rem; }
        }
    }

    .tdb-grid {
        display: grid;
        grid-template-columns: 1.2fr 1fr;
        gap: 1rem;
    }

    .card {
        background: #fff;
        border: 1px solid rgba(0,0,0,.08);
        border-radius: 12px;
        padding: 1rem;

        .card-h {
            display: flex; align-items: baseline; gap: .5rem; margin-bottom: .75rem;
            h4 { margin: 0; }
            .count-badge {
                margin-left: auto; padding: .15rem .5rem; border-radius: 999px; font-size: .8rem;
                background: rgba(0,0,0,.05); &.ok { background: rgba(0,150,0,.08); }
            }
            .hint { color: $text-color-light; font-size: .85rem; }
        }

        .list {
            .row-main { flex: 1; min-width: 0; }
            .row-actions { flex-shrink: 0; margin-left: .75rem; }
            .meta { white-space: nowrap; }
            .row-main { display: flex; align-items: center; gap: .5rem; }
            .row-main .title { flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
            .row-main .meta { margin-left: auto; }
            display: flex; flex-direction: column; gap: .5rem;
            .row { display: flex; align-items: center; justify-content: space-between;
                padding: .6rem .2rem; border-bottom: 1px dashed rgba(0,0,0,.06);
                &:last-child { border-bottom: 0; }
            }
            .title { font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
            .meta { color: $text-color-light; font-size: .85rem; display: inline-flex; gap: .5rem; align-items: center; }
            .badge { padding: .1rem .5rem; border-radius: 999px; font-size: .75rem; background: rgba(0,0,0,.05); text-transform: capitalize; }
            .badge.warn { background: rgba(255,165,0,.12); }
        }

        .empty { color: $text-color-light; padding: .5rem 0; }
    }

    .skeleton {
        .skeleton-kpi { height: 64px; background: linear-gradient(90deg, #eee, #f7f7f7, #eee);
            border-radius: 10px; margin-bottom: .5rem; animation: pulse 1.3s infinite; }
        .skeleton-card { height: 220px; background: linear-gradient(90deg, #eee, #f7f7f7, #eee);
            border-radius: 12px; margin-top: .5rem; animation: pulse 1.3s infinite; }
    }
}

@keyframes pulse { 0%{background-position:-200px 0} 100%{background-position:calc(200px + 100%) 0} }

/* Responsive for teacher block only */
@media (max-width: 1100px) {
    .tdb .tdb-kpis { grid-template-columns: repeat(3, 1fr); }
    .tdb .tdb-grid { grid-template-columns: 1fr; }
}
@media (max-width: 640px) {
    .tdb .tdb-kpis { grid-template-columns: repeat(2, 1fr); }
}


.dashboard-continer {
    display: grid;
    grid-template-columns: 2fr 1fr;
    grid-template-rows: 1fr;
    min-height: 100vh;
    gap: 2rem;

    h4 {
        color: $text-color-light;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid $text-color-light;
    }

    .announcement-container {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        width: 100%;

        .announcement-overview {
            width: 100%;
        }
    }

    aside {
        display: flex;
        flex-direction: column;
        gap: 2rem;

        .project-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 100%;
        }

        .calendar-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 100%;
        }

        .charts-section {
            background: $background-color-light;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;

            canvas {
                max-width: 100%;
            }
        }

        .no-project {
            display: flex;
            flex-direction: column;
            gap: 1rem;

            p {
                color: $text-color-light;
            }
        }
    }
}
