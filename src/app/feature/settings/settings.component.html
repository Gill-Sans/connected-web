<div class="settings-container">
  <h2>Settings</h2>

  <!-- Invitation Link Section -->
  <div class="settings-section">
    <h3>Generate a registration link</h3>
    <p>
      Generate a unique invitation link for Researchers or external collaborators. This link allows a single registration for creating global projects and is valid for 72 hours. (Available only for teachers.)
    </p>
    <div class="invite-section" *hasRole="Role.Teacher">
      <app-button variant="primary" (click)="generateInviteLink()" [disabled]="isLoading">
        {{ isLoading ? 'Generating Link...' : 'Generate Invitation Link' }}
      </app-button>
    </div>
    @if (inviteLink) {
      <div class="invite-link-container">
        <input type="text" [value]="inviteLink" readonly class="invite-link-field" />
        <app-button variant="neutral" (click)="copyInviteLink()">Copy Link</app-button>
      </div>
    }
    @if (errorMessage) {
      <div class="error">
        {{ errorMessage }}
      </div>
    }
  </div>

  <!-- Account Deletion Section -->
  <div class="settings-section">
    <h3>Request Account Deletion</h3>
    <p>
      Warning: This will permanently delete your account and all associated data. Due to project structure constraints, your data will be retained for 60 days before final deletion. This action cannot be undone.
    </p>
    <app-button variant="danger"
      appConfirmClick
      [confirmTitle]="'Confirm Account Deletion'"
      [confirmMessage]="'Are you sure you want to permanently delete your account? This action is irreversible, and your data will be retained for 60 days before deletion.'"
      [confirmText]="'Yes, Delete My Account'"
      [cancelText]="'Cancel'"
      (confirmedClick)="requestAccountDeletion()">
      Request Account Deletion
    </app-button>
  </div>
</div>
