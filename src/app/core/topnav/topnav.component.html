<div class="topnav">
    <div class="left">
        <div (click)="toggleAssignmentsHidden()" (clickOutside)="closeAssignmentsDropdown()" class="left-content"
             clickOutside>
            <div class="course-icon"></div>
            <div class="course-info" *ngIf="activeAssignment$ | async as active; else defaultInfo">
                <p class="assignment-name">{{ active.assignment.name }}</p>
                <p class="course-name">{{ active.course.name }}</p>
            </div>
            <ng-template #defaultInfo>
                <div class="course-info">
                    <p class="assignment-name">No assignment selected</p>
                    <p class="course-name">select an assignment to get started</p>
                </div>
            </ng-template>
            <img alt="Dropdown" class="dropdown-icon" src="icons/dropdown.svg"/>
            <div [hidden]="isHiddenAssignments" class="dropdown">
                <dl *ngIf="courses$ | async as courses; else loadingAssignments">
                    <div *ngFor="let course of courses">
                        <dt>{{ course.name }}</dt>
                        <dd
                            (click)="selectAssignment(assignment, course)"
                            *ngFor="let assignment of course.assignments"
                            [ngClass]="{'selected': (activeAssignment$ | async)?.assignment?.id === assignment.id}">
                            {{ assignment.name }}
                        </dd>
                    </div>
                </dl>
                <ng-template #loadingAssignments>
                    Loading Assignments...
                </ng-template>
            </div>
        </div>
    </div>
    <div class="right">
        <div class="nav-name">Projects</div>
        <div class="nav-icons">
            <div class="notification-icon">
                <img alt="Notifications" src="icons/bell-regular.svg"/>
                <span class="notification-badge">3</span>
            </div>
            <div *ngIf="user$ | async as user; else loadingUser">
                <span class="nav-name">Welcome, {{ user.email + " - " + user.role }}</span>
            </div>
            <ng-template #loadingUser>
                Loading...
            </ng-template>
            <div (click)="toggleHiddenprofile()" (clickOutside)="closeProfileDropdown()" class="user-icon"
                 clickOutside></div>
            <div [hidden]="isHiddenProfile" class="dropdownProfile">
                <ul>
                    <li (click)="navigateToProfile()">My profile</li>
                    <li (click)="logout()">Log out</li>
                </ul>
            </div>
        </div>
    </div>
</div>
